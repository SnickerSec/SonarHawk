{
  "$schema": "https://schema.railpack.com",
  "provider": "node",
  "packages": {
    "node": "20"
  },
  "steps": {
    "install": {
      "inputs": [
        { "context": ".", "include": ["package.json", "package-lock.json", "web/**"] }
      ],
      "commands": [
        "npm install --include=dev --include=optional --legacy-peer-deps"
      ]
    },
    "build": {
      "inputs": [
        { "step": "install" }
      ],
      "commands": [
        "npm run build"
      ]
    }
  },
  "deploy": {
    "inputs": [
      { "step": "build" }
    ],
    "startCommand": "cd web && NODE_ENV=production node server.js"
  }
}
